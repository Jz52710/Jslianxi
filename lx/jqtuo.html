<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>JQ 拖拽</title>
    <script src="./js/jQuery.js"></script>
    <style>
.drag{position:absolute;width:100px;height:100px;border:1px solid #ddd;background:#FBF2BD;text-align:center;padding:5px;top:100px;left:20px;cursor:move;}
 </style>
</head>
<body>
 <div class="drag"></div>
</body>
<script>
// $(function(){
//     let _move=false;//移动标记
//     let _x,_y;//鼠标离控件左上角的相对位置
//     $(".drag").click(function(){
//         //alert("click");//点击（松开后触发）
//         }).mousedown(function(e){
//             _move=true;
//             _x=e.pageX-parseInt($(".drag").css("left"));
//             _y=e.pageY-parseInt($(".drag").css("top"));
//             // $(".drag").fadeTo(20, 0.5);//点击后开始拖动并透明显示
//         });
//     $(document).mousemove(function(e){
//         if(_move){
//             let x=e.pageX-_x;//移动时根据鼠标位置计算控件左上角的绝对位置
//             let y=e.pageY-_y;
//             $(".drag").css({top:y,left:x});//控件新位置
//         }
//         }).mouseup(function(){
//             _move=false;
//             // $(".drag").fadeTo("fast", 1);//松开鼠标后停止移动并恢复成不透明
//         });
// });
    $(function () {
        let disX = 0;
        let disY = 0;
        $('div').mousedown(function (ev) {
            disX = ev.pageX - $(this).offset().left
            disY = ev.pageY - $(this).offset().top
            $(document).mousemove(function (ev) {
                $('div').css('left',ev.pageX - disX)
                $('div').css('top',ev.pageY - disY)
            });
            $(document).mouseup(function () {
                $(document).off()
            });
            return false
        })
    })
</script>
</html>